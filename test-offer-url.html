<!DOCTYPE html>
<html>
<head>
    <title>Test Offer URL</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .log { background: #f5f5f5; padding: 10px; margin: 5px 0; border-radius: 4px; }
        .error { background: #ffebee; border: 1px solid #f44336; }
        .success { background: #e8f5e9; border: 1px solid #4caf50; }
    </style>
</head>
<body>
    <h1>Offer URL Test</h1>
    <button onclick="testOffer()">Test Offer Access</button>
    <div id="logs"></div>

    <script>
        function log(message, type = 'info') {
            const logs = document.getElementById('logs');
            const div = document.createElement('div');
            div.className = `log ${type}`;
            div.innerHTML = `${new Date().toLocaleTimeString()}: ${message}`;
            logs.appendChild(div);
            console.log(message);
        }

        async function testOffer() {
            document.getElementById('logs').innerHTML = '';
            
            try {
                log('Starting offer URL test...');
                log(`Current URL: ${window.location.href}`);
                log(`Current hostname: ${window.location.hostname}`);
                
                // Test direct access to the problematic URL
                const testUrl = '/offers/CMvmI8IcUbXme78luUAl';
                log(`Testing URL: ${testUrl}`);
                
                // Try to fetch the page
                const response = await fetch(testUrl);
                log(`Response status: ${response.status}`);
                log(`Response headers: ${JSON.stringify([...response.headers.entries()])}`);
                
                if (response.ok) {
                    const html = await response.text();
                    log(`Response length: ${html.length} characters`, 'success');
                    
                    // Check if it contains error indicators
                    if (html.includes('Something went wrong')) {
                        log('HTML contains "Something went wrong" error', 'error');
                    } else {
                        log('HTML does not contain error message', 'success');
                    }
                } else {
                    log(`HTTP error: ${response.status} ${response.statusText}`, 'error');
                }
                
            } catch (error) {
                log(`JavaScript error: ${error.message}`, 'error');
                log(`Error stack: ${error.stack}`, 'error');
            }
        }

        // Auto-run test on page load
        window.addEventListener('load', testOffer);
    </script>
</body>
</html>